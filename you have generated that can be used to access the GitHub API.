[33mcommit 67139fe1928314b0a64fa436c080a479e4eab199[m[33m ([m[1;36mHEAD -> [m[1;32mmain[m[33m)[m
Author: Eden139 <damyeden@gmail.com>
Date:   Sun Nov 12 21:22:36 2023 +0300

    version 1 du cgi auth

[1mdiff --git a/auth.c b/auth.c[m
[1mnew file mode 100644[m
[1mindex 0000000..bfcdc55[m
[1m--- /dev/null[m
[1m+++ b/auth.c[m
[36m@@ -0,0 +1,239 @@[m
[32m+[m[32m#include "auth.h"[m
[32m+[m[32mint count_line(FILE* stream) {[m
[32m+[m	[32mint count = 0;[m
[32m+[m	[32mwhile(fscanf(stream, "%*[^\n]\n") != EOF) count++;[m
[32m+[m	[32mrewind(stream);[m
[32m+[m	[32mreturn count;[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_head(void) {[m
[32m+[m	[32mprintf("Content-type: text/html\n\n");[m
[32m+[m	[32mprintf("<!DOCTYPE html>"[m
[32m+[m			[32m"<html>"[m
[32m+[m			[32m"<head>"[m
[32m+[m				[32m"<meta charset=\"utf-8\"/>"[m
[32m+[m				[32m"<meta type=\"description\" value=\"Voici le contenu du fichier auth.log\"/>"[m
[32m+[m				[32m"<title>AUTHLOG</title>"[m
[32m+[m		[32m);[m
[32m+[m	[32mwrite_css();[m
[32m+[m	[32mprintf("</head>");[m
[32m+[m	[32mreturn ;[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_css(void) {[m
[32m+[m	[32mprintf("<style>"[m
[32m+[m			[32m":root {"[m
[32m+[m				[32m"margin: 0;"[m
[32m+[m				[32m"padding: 0;"[m
[32m+[m				[32m"font-size: 16px;"[m
[32m+[m				[32m"font-family: sans-serif;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"main {"[m
[32m+[m				[32m"display: flex;"[m
[32m+[m				[32m"flex-direction: column;"[m
[32m+[m				[32m"justify-content: center;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"table {"[m
[32m+[m				[32m"margin: 2rem auto;"[m
[32m+[m				[32m"border: 2px solid darkblue;"[m
[32m+[m				[32m"border-collapse: collapse;"[m
[32m+[m				[32m"box-shadow: 0 0 5px rgba(0, 0, 0, 0.7);"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"tr, td, th {"[m
[32m+[m				[32m"border: 1px solid #ddd;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"thead {"[m
[32m+[m				[32m"background: darkblue;"[m
[32m+[m				[32m"color: white;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"td, th {"[m
[32m+[m				[32m"border: 1px solid;"[m
[32m+[m				[32m"padding: 0.8rem 1.3rem;"[m
[32m+[m				[32m"text-align: center;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"th {"[m
[32m+[m				[32m"text-transform: uppercase;"[m
[32m+[m				[32m"font-weight: bolder;"[m
[32m+[m				[32m"font-size: 1.4rem;"[m
[32m+[m				[32m"letter-spacing: 0.15ch;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"tr:nth-child(even) {"[m
[32m+[m				[32m"background: rgba(0,0,0,0.04);"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m"p {"[m
[32m+[m				[32m"text-align: center;"[m
[32m+[m				[32m"text-transform: uppercase;"[m
[32m+[m				[32m"font-size: 2rem;"[m
[32m+[m				[32m"color: red;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m".pagination {"[m
[32m+[m				[32m"display: flex;"[m
[32m+[m				[32m"justify-content: center;"[m
[32m+[m				[32m"width: auto;"[m
[32m+[m				[32m"font-size: 1.2rem;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m".pagination a {"[m
[32m+[m				[32m"margin: .3rem;"[m
[32m+[m				[32m"padding: .7rem;"[m
[32m+[m				[32m"border: .125rem solid;"[m
[32m+[m				[32m"color: darkblue;"[m
[32m+[m				[32m"text-decoration: none;"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m".pagination a:hover  {"[m
[32m+[m				[32m"background: rgba(0, 0, 0, 0.06);"[m
[32m+[m			[32m"}"[m
[32m+[m			[32m".pagination a[class=\"blue\"] {"[m
[32m+[m				[32m"background: darkblue;"[m
[32m+[m				[32m"padding: 1rem;"[m
[32m+[m				[32m"color: white;"[m
[32m+[m			[32m"}"[m
[32m+[m		[32m"</style>"[m
[32m+[m	[32m      );[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_body(FILE* auth) {[m
[32m+[m	[32mint count = count_line(auth), user_number;[m
[32m+[m	[32mchar* str = getenv("QUERY_STRING"), *user = NULL, d[] = "$DEFAULT$", *p = NULL, *test;[m
[32m+[m	[32mchar vide[] = "";[m
[32m+[m	[32mint page = 1;[m
[32m+[m	[32muser = d;[m
[32m+[m[41m	[m
[32m+[m	[32mif(*str != '\0') {[m
[32m+[m		[32mtest = strstr(str, "user=");[m
[32m+[m		[32mif(test != NULL) {[m
[32m+[m			[32muser = test;[m
[32m+[m			[32msscanf(user + 5, "%m[^\n&]", &user);[m
[32m+[m			[32mif(user == NULL) user = vide;[m
[32m+[m		[32m}[m
[32m+[m		[32mif((p = strstr(str, "page=")) != NULL) {[m
[32m+[m			[32msscanf(p + 5, "%d", &page);[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m
[32m+[m	[32mprintf("<body>");[m
[32m+[m	[32mprintf("<main>");[m
[32m+[m		[32mAuth* session = get_users(auth, count, &user_number, user);[m
[32m+[m		[32mwrite_table(session, &user_number,  page, user);[m
[32m+[m	[32mprintf("</main>");[m
[32m+[m	[32mprintf("</body>");[m
[32m+[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_table(Auth* session, int* user_number, int page, char* user) {[m
[32m+[m	[32mif(*user_number == 0) {[m
[32m+[m		[32mprintf("<p>Il n'y a pas d'utilisateur de ce nom</p>");[m
[32m+[m	[32m}[m
[32m+[m	[32melse {[m
[32m+[m		[32mprintf("<table>");[m
[32m+[m		[32mprintf("<thead>"[m
[32m+[m				[32m"<tr>"[m
[32m+[m					[32m"<th>User</th>"[m
[32m+[m					[32m"<th>session</th>"[m
[32m+[m					[32m"<th>status</th>"[m
[32m+[m					[32m"<th>date</th>"[m
[32m+[m				[32m"<tr>"[m
[32m+[m			[32m"</thead>"[m
[32m+[m		[32m      );[m
[32m+[m		[32mprintf("<tbody>");[m
[32m+[m	[32m/*[m
[32m+[m		[32mfor(int i = 0; i < *user_number; ++i) {[m
[32m+[m
[32m+[m			[32mprintf("<tr>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m				[32m"</tr>"[m
[32m+[m				[32m, session[i].name, session[i].session, session[i].status, session[i].datetime[m
[32m+[m				[32m);[m
[32m+[m		[32m}[m
[32m+[m	[32m*/[m
[32m+[m		[32mfor(int i = (page-1) * 10; i < min(page * 10, *user_number); i++) {[m
[32m+[m			[32mprintf("<tr>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m					[32m"<td>%s</td>"[m
[32m+[m				[32m"</tr>"[m
[32m+[m				[32m, session[i].name, session[i].session, session[i].status, session[i].datetime[m
[32m+[m				[32m);[m
[32m+[m		[32m}[m
[32m+[m
[32m+[m		[32mprintf("</tbody>");[m
[32m+[m		[32mprintf("</table>");[m
[32m+[m		[32mprintf("<nav class=\"pagination\">");[m
[32m+[m		[32mint first = page - min(4, page - 1);[m
[32m+[m		[32mint last_page = (int)ceil(*user_number/10.0);[m
[32m+[m		[32mint last = min(first + 9, last_page);[m
[32m+[m		[32mfor(int i = first; i <= last; i++){[m
[32m+[m			[32mprintf("<a href=\"http://www.authlog.mg/?user=%s&page=%d\"%s>%d</a>", user, i, i == page ? "class=\"blue\"": "", i);[m
[32m+[m		[32m}[m
[32m+[m		[32mprintf("</nav>");[m
[32m+[m	[32m}[m
[32m+[m[32m}[m
[32m+[m[32mint min(int a, int b) {[m
[32m+[m	[32mreturn a < b ? a : b;[m
[32m+[m[32m}[m
[32m+[m[32mAuth* get_users(FILE* auth, int count, int* user_number, char* user) {[m
[32m+[m	[32mAuth* session = malloc(count * sizeof(Auth));[m
[32m+[m	[32mchar* row, *here;[m
[32m+[m	[32m*user_number = 0;[m
[32m+[m	[32mif(strcmp(user, "$DEFAULT$") == 0) {[m
[32m+[m		[32mwhile(fscanf(auth, "%m[^\n]\n", &row) != EOF){[m
[32m+[m			[32mif(strstr(row, "for user") != NULL) {[m
[32m+[m				[32msession[*user_number].datetime = malloc(100);[m
[32m+[m				[32msscanf(row, "%s%*s%ms%*s%*s%ms%*s%*s%ms", session[*user_number].datetime, &session[*user_number].session, &session[*user_number].status, &session[*user_number].name);[m
[32m+[m				[32mstrtok(session[*user_number].name, "(");[m
[32m+[m				[32mstrtok(session[*user_number].session, ":([");[m
[32m+[m				[32mto_gasy(session[*user_number].datetime);[m
[32m+[m				[32m(*user_number)++;[m
[32m+[m			[32m}[m
[32m+[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m	[32melse {[m
[32m+[m		[32mwhile(fscanf(auth, "%m[^\n]\n", &row) != EOF) {[m
[32m+[m			[32mif((here = strstr(row, "for user")) != NULL) {[m
[32m+[m				[32mif(strncasecmp(here + 9, user, strlen(user)) == 0) {[m
[32m+[m					[32msession[*user_number].datetime = malloc(100);[m
[32m+[m					[32msscanf(row, "%ms%*s%ms%*s%*s%ms%*s%*s%ms", &session[*user_number].datetime, &session[*user_number].session, &session[*user_number].status, &session[*user_number].name);[m
[32m+[m					[32mstrtok(session[*user_number].name, "(");[m
[32m+[m					[32mstrtok(session[*user_number].session, ":([");[m
[32m+[m					[32mto_gasy(session[*user_number].datetime);[m
[32m+[m					[32m(*user_number)++;[m
[32m+[m				[32m}[m
[32m+[m			[32m}[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m[32m//	free(row);free(here);[m
[32m+[m	[32mreturn realloc(session, sizeof(Auth)**user_number);[m
[32m+[m[32m}[m
[32m+[m[32mvoid to_gasy(char* date) {[m
[32m+[m	[32mint an, mois, jour, heure, minute, seconde;[m
[32m+[m	[32msscanf(date, "%d-%d-%dT%d:%d:%d", &an, &mois, &jour, &heure, &minute, &seconde);[m
[32m+[m	[32mint njours = (an - 1) * 365;[m
[32m+[m	[32mnjours += an > 1582  ? (an - 1) / 4 - (an-1) / 100 + (an - 1) / 400 + 2 : (an - 1) / 4;[m
[32m+[m	[32mnjours += (mois - 1) * 31;[m
[32m+[m	[32mswitch(mois) {[m
[32m+[m		[32mcase 12:[m
[32m+[m			[32m--njours;[m
[32m+[m		[32mcase 11:[m
[32m+[m		[32mcase 10:[m
[32m+[m			[32m--njours;[m
[32m+[m		[32mcase 9:[m
[32m+[m		[32mcase 8:[m
[32m+[m		[32mcase 7:[m
[32m+[m			[32m--njours;[m
[32m+[m		[32mcase 6:[m
[32m+[m		[32mcase 5:[m
[32m+[m			[32m--njours;[m
[32m+[m		[32mcase 4:[m
[32m+[m		[32mcase 3:[m
[32m+[m			[32mif(an > 1582) njours -= (an % 4 == 0) && (an % 100 != 0 || an % 400 == 0) ? 2 : 3;[m
[32m+[m			[32melse njours -= (an % 4 == 0) ? 2: 3;[m
[32m+[m			[32mbreak;[m
[32m+[m
[32m+[m	[32m}[m
[32m+[m	[32mnjours += (jour - 1);[m
[32m+[m	[32mchar *gasy[] = {"Sabotsy", "Alahady", "Alatsinainy", "Talata", "Alarobia", "Alakamisy", "Zoma"};[m
[32m+[m	[32mchar *volana[] = {"Janoary", "Febroary", "Martsa", "Aprily", "May", "Jona", "Jolay", "Aogositra", "Septambra", "Oktobra", "Novambra", "Desambra"};[m
[32m+[m	[32msprintf(date, "%s %d %s %d - %02d:%02d:%02d", gasy[njours % 7], jour, volana[mois -1], an, heure, minute, seconde);[m
[32m+[m	[32mreturn;[m
[32m+[m[32m}[m
[1mdiff --git a/auth.h b/auth.h[m
[1mnew file mode 100644[m
[1mindex 0000000..f9ebde2[m
[1m--- /dev/null[m
[1m+++ b/auth.h[m
[36m@@ -0,0 +1,26 @@[m
[32m+[m[32m#ifndef AUTH_H[m
[32m+[m[32m#define AUTH_H[m
[32m+[m
[32m+[m[32m#include <stdio.h>[m
[32m+[m[32m#include <stdlib.h>[m
[32m+[m[32m#include <ctype.h>[m
[32m+[m[32m#include <math.h>[m
[32m+[m[32m#include <string.h>[m
[32m+[m
[32m+[m[32mtypedef struct {[m
[32m+[m	[32mchar* name;[m
[32m+[m	[32mchar* datetime;[m
[32m+[m	[32mchar* session;[m
[32m+[m	[32mchar* status;[m
[32m+[m[32m} Auth;[m
[32m+[m
[32m+[m[32mint count_line (FILE* stream);[m
[32m+[m[32mvoid write_head(void);[m
[32m+[m[32mvoid write_css(void);[m
[32m+[m[32mvoid write_body(FILE* auth);[m
[32m+[m[32mAuth* get_users(FILE* auth, int count, int* user_number, char* user);[m
[32m+[m[32mvoid write_table(Auth* session, int* user_number, int page, char* user);[m
[32m+[m[32mint min(int a, int b);[m
[32m+[m[32mvoid to_gasy(char* date);[m
[32m+[m
[32m+[m[32m#endif[m
[1mdiff --git a/auth.h.gch b/auth.h.gch[m
[1mnew file mode 100644[m
[1mindex 0000000..44b3c4f[m
Binary files /dev/null and b/auth.h.gch differ
[1mdiff --git a/auth/connecter.c b/auth/connecter.c[m
[1mnew file mode 100644[m
[1mindex 0000000..d1aad6c[m
[1m--- /dev/null[m
[1m+++ b/auth/connecter.c[m
[36m@@ -0,0 +1,117 @@[m
[32m+[m[32m#include <stdio.h>[m
[32m+[m
[32m+[m[32mvoid write_css(void);[m
[32m+[m[32mint main() {[m
[32m+[m	[32mprintf("Content-type: text/html\n\n");[m
[32m+[m	[32mprintf("<!DOCTYPE html>");[m
[32m+[m	[32mprintf("<html>"[m
[32m+[m			[32m"<head>"[m
[32m+[m				[32m"<meta charset=\"utf-8\">"[m
[32m+[m				[32m"<title>CONNECTER</title>"[m
[32m+[m		[32m);[m
[32m+[m	[32mwrite_css();[m
[32m+[m	[32mprintf("</head>");[m
[32m+[m	[32mprintf("<body>");[m
[32m+[m	[32mprintf("<main>");[m
[32m+[m	[32mprintf("<h2>connexion</h2>");[m
[32m+[m	[32mprintf("<form action=\"../index.cgi\" method=\"get\">"[m
[32m+[m			[32m"<div class=\"input\">"[m
[32m+[m				[32m"<input type=\"text\" placeholder=\"Username\" name=\"name\">"[m
[32m+[m					[32m"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">"[m
[32m+[m						[32m"<path d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"/>"[m
[32m+[m					[32m"</svg>"[m
[32m+[m			[32m"</div>"[m
[32m+[m			[32m"<div class=\"input\">"[m
[32m+[m				[32m"<input type=\"password\" placeholder=\"Password\" name=\"passwd\">"[m
[32m+[m					[32m"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">"[m
[32m+[m						[32m"<path d=\"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z\"/>"[m
[32m+[m					[32m"</svg>"[m
[32m+[m			[32m"</div>"[m
[32m+[m			[32m"<button type=\"submit\">Envoyer</button>"[m
[32m+[m		[32m);[m
[32m+[m	[32mprintf("</main>");[m
[32m+[m
[32m+[m	[32mprintf("</body>");[m
[32m+[m	[32mprintf("</html>");[m
[32m+[m
[32m+[m
[32m+[m	[32mreturn 0;[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_css(void) {[m
[32m+[m	[32mprintf("<style>"[m
[32m+[m		[32m":root {"[m
[32m+[m			[32m"font-family: sans-serif;"[m
[32m+[m			[32m"font-size: 40px;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"* {"[m
[32m+[m			[32m"padding: 0;"[m
[32m+[m			[32m"margin: 0;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"body {"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"min-height: 100vh;"[m
[32m+[m			[32m"align-items: center;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"main {"[m
[32m+[m			[32m"padding: 1rem 2rem 2rem 2rem;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"flex-direction: column;"[m
[32m+[m			[32m"align-items: center;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m			[32m"border-radius: .5rem;"[m
[32m+[m			[32m"border: 2px solid rgba(0, 0, 0, 0.7);"[m
[32m+[m			[32m"background: rgba(0, 0, 0, .3);"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"main h2 {"[m
[32m+[m			[32m"text-transform: uppercase;"[m
[32m+[m			[32m"color: rgba(0, 0, 0, 0.8);"[m
[32m+[m			[32m"margin-bottom: 1.6rem;"[m
[32m+[m			[32m"font-size: 1.3rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form {"[m
[32m+[m			[32m"width: 100%%;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"flex-direction: column;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input {"[m
[32m+[m			[32m"position: relative;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input svg {"[m
[32m+[m			[32m"position: absolute;"[m
[32m+[m			[32m"fill: grey;"[m
[32m+[m			[32m"right: .9rem;"[m
[32m+[m			[32m"top: .3rem;"[m
[32m+[m			[32m"height: .8rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input input {"[m
[32m+[m			[32m"border: 2px solid rgba(0, 0, 0, 0.7);"[m
[32m+[m			[32m"outline: none;"[m
[32m+[m			[32m"width: 85%%;"[m
[32m+[m			[32m"height: 1.5rem;"[m
[32m+[m			[32m"margin-bottom: 1.3rem;"[m
[32m+[m			[32m"border-radius: .3rem;"[m
[32m+[m			[32m"padding-left: .3rem;"[m
[32m+[m			[32m"font-size: .5rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input input::placeholder {"[m
[32m+[m			[32m"font-size: .5rem;"[m
[32m+[m			[32m"color: rgba(0, 0, 0, 0.7);"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form button {"[m
[32m+[m			[32m"width: 85%%;"[m
[32m+[m			[32m"height: 1.5rem;"[m
[32m+[m			[32m"border-radius: .3rem;"[m
[32m+[m			[32m"font-size: .6rem;"[m
[32m+[m			[32m"margin-left: .7rem;"[m
[32m+[m			[32m"text-transform: uppercase;"[m
[32m+[m			[32m"font-weight: 600;"[m
[32m+[m		[32m"}"[m
[32m+[m
[32m+[m		[32m"</style>"[m
[32m+[m	[32m      );[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/auth/inscription.c b/auth/inscription.c[m
[1mnew file mode 100644[m
[1mindex 0000000..1e90a07[m
[1m--- /dev/null[m
[1m+++ b/auth/inscription.c[m
[36m@@ -0,0 +1,124 @@[m
[32m+[m[32m#include <stdio.h>[m
[32m+[m
[32m+[m[32mvoid write_css(void);[m
[32m+[m[32mint main() {[m
[32m+[m	[32mprintf("Content-type: text/html\n\n");[m
[32m+[m	[32mprintf("<!DOCTYPE html>");[m
[32m+[m	[32mprintf("<html>"[m
[32m+[m			[32m"<head>"[m
[32m+[m				[32m"<meta charset=\"utf-8\">"[m
[32m+[m				[32m"<title>Inscription</title>"[m
[32m+[m		[32m);[m
[32m+[m	[32mwrite_css();[m
[32m+[m	[32mprintf("</head>");[m
[32m+[m	[32mprintf("<body>");[m
[32m+[m	[32mprintf("<main>");[m
[32m+[m	[32mprintf("<h2>inscription</h2>");[m
[32m+[m	[32mprintf("<form action=\"verification.cgi\" method=\"get\">"[m
[32m+[m			[32m"<div class=\"input\">"[m
[32m+[m				[32m"<input type=\"text\" placeholder=\"Username\" name=\"name\">"[m
[32m+[m					[32m"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">"[m
[32m+[m						[32m"<path d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z\"/>"[m
[32m+[m					[32m"</svg>"[m
[32m+[m			[32m"</div>"[m
[32m+[m			[32m"<div class=\"input\">"[m
[32m+[m				[32m"<input type=\"password\" placeholder=\"Password\" name=\"passwd\">"[m
[32m+[m					[32m"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">"[m
[32m+[m						[32m"<path d=\"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z\"/>"[m
[32m+[m					[32m"</svg>"[m
[32m+[m			[32m"</div>"[m
[32m+[m			[32m"<div class=\"input\">"[m
[32m+[m				[32m"<input type=\"password\" placeholder=\"Confirmer le mdp\" name=\"confirm-passwd\">"[m
[32m+[m					[32m"<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">"[m
[32m+[m						[32m"<path d=\"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z\"/>"[m
[32m+[m					[32m"</svg>"[m
[32m+[m			[32m"</div>"[m
[32m+[m
[32m+[m			[32m"<button type=\"submit\">Envoyer</button>"[m
[32m+[m		[32m);[m
[32m+[m	[32mprintf("</main>");[m
[32m+[m
[32m+[m	[32mprintf("</body>");[m
[32m+[m	[32mprintf("</html>");[m
[32m+[m
[32m+[m
[32m+[m	[32mreturn 0;[m
[32m+[m[32m}[m
[32m+[m[32mvoid write_css(void) {[m
[32m+[m	[32mprintf("<style>"[m
[32m+[m		[32m":root {"[m
[32m+[m			[32m"font-family: sans-serif;"[m
[32m+[m			[32m"font-size: 40px;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"* {"[m
[32m+[m			[32m"padding: 0;"[m
[32m+[m			[32m"margin: 0;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"body {"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"min-height: 100vh;"[m
[32m+[m			[32m"align-items: center;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"main {"[m
[32m+[m			[32m"padding: 1rem 2rem 2rem 2rem;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"flex-direction: column;"[m
[32m+[m			[32m"align-items: center;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m			[32m"border-radius: .5rem;"[m
[32m+[m			[32m"border: 2px solid rgba(0, 0, 0, 0.7);"[m
[32m+[m			[32m"background: rgba(0, 0, 0, .3);"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"main h2 {"[m
[32m+[m			[32m"text-transform: uppercase;"[m
[32m+[m			[32m"color: rgba(0, 0, 0, 0.8);"[m
[32m+[m			[32m"margin-bottom: 1.6rem;"[m
[32m+[m			[32m"font-size: 1.3rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form {"[m
[32m+[m			[32m"width: 100%%;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"flex-direction: column;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input {"[m
[32m+[m			[32m"position: relative;"[m
[32m+[m			[32m"display: flex;"[m
[32m+[m			[32m"justify-content: center;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input svg {"[m
[32m+[m			[32m"position: absolute;"[m
[32m+[m			[32m"fill: grey;"[m
[32m+[m			[32m"right: .9rem;"[m
[32m+[m			[32m"top: .3rem;"[m
[32m+[m			[32m"height: .8rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input input {"[m
[32m+[m			[32m"border: 2px solid rgba(0, 0, 0, 0.7);"[m
[32m+[m			[32m"outline: none;"[m
[32m+[m			[32m"width: 85%%;"[m
[32m+[m			[32m"height: 1.5rem;"[m
[32m+[m			[32m"margin-bottom: 1.3rem;"[m
[32m+[m			[32m"border-radius: .3rem;"[m
[32m+[m			[32m"padding-left: .3rem;"[m
[32m+[m			[32m"font-size: .5rem;"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form .input input::placeholder {"[m
[32m+[m			[32m"font-size: .5rem;"[m
[32m+[m			[32m"color: rgba(0, 0, 0, 0.7);"[m
[32m+[m		[32m"}"[m
[32m+[m		[32m"form button {"[m
[32m+[m			[32m"width: 85%%;"[m
[32m+[m			[32m"height: 1.5rem;"[m
[32m+[m			[32m"border-radius: .3rem;"[m
[32m+[m			[32m"font-size: .6rem;"[m
[32m+[m			[32m"margin-left: .7rem;"[m
[32m+[m			[32m"text-transform: uppercase;"[m
[32m+[m			[32m"font-weight: 600;"[m
[32m+[m		[32m"}"[m
[32m+[m
[32m+[m		[32m"</style>"[m
[32m+[m	[32m      );[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/auth/verification.c b/auth/verification.c[m
[1mnew file mode 100644[m
[1mindex 0000000..3195870[m
[1m--- /dev/null[m
[1m+++ b/auth/verification.c[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32m#include <stdio.h>[m
[32m+[m
[32m+[m[32mint main() {[m
[32m+[m	[32mchar *a = getenv("QUERY_STRING");[m
[32m+[m	[32mchar *name, *passwd, *confirm_passwd;[m
[32m+[m
[32m+[m	[32mif((name = strstr(a, "name="))) {[m
[32m+[m		[32msscanf(name, "name=%m[^\n&]", &name);[m
[32m+[m	[32m}[m
[32m+[m	[32melse {[m
[32m+[m
[32m+[m
[32m+[m	[32mif((passwd = strstr(a, "passwd="))) {[m
[32m+[m		[32msscanf(passwd, "passwd=%m[^\n&]", &passwd);[m
[32m+[m	[32m}[m
[32m+[m	[32mif((confirm_passwd = strstr(a, "confirm="))) {[m
[32m+[m		[32msscanf(confirm_passwd, "confirm=%[^\n&]", &confirm_passwd);[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m	[32mreturn 0;[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/main.c b/main.c[m
[1mnew file mode 100644[m
[1mindex 0000000..f388aa8[m
[1m--- /dev/null[m
[1m+++ b/main.c[m
[36m@@ -0,0 +1,15 @@[m
[32m+[m[32m#include "auth.h"[m
[32m+[m
[32m+[m[32mint main() {[m
[32m+[m	[32mFILE* auth = fopen("/var/log/auth.log", "r");[m
[32m+[m	[32mif(auth == NULL) {[m
[32m+[m		[32mprintf("Content-type: text/html\n\n");[m
[32m+[m		[32mprintf("Je ne peux pas l'ouvrir");[m
[32m+[m		[32mexit(EXIT_FAILURE);[m
[32m+[m	[32m}[m
[32m+[m	[32mwrite_head();[m
[32m+[m	[32mwrite_body(auth);[m
[32m+[m[32m//	write_foot();[m
[32m+[m	[32mreturn 0;[m
[32m+[m[32m}[m
[32m+[m
